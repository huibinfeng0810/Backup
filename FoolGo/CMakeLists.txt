CMAKE_MINIMUM_REQUIRED(VERSION 2.8)
PROJECT(FoolGo)
SET(CMAKE_CXX_COMPILER g++)
ADD_DEFINITIONS(-std=c++0x)
ADD_DEFINITIONS(-O3)
ADD_DEFINITIONS(-march=corei7)
SET(CMAKE_CXX_FLAGS "-Wno-unused-result")
SET(CMAKE_EXE_LINKER_FLAGS "-g")

SET(GTEST_ROOT /usr/share/gtest-1.6.0)
SET(SRC src)

INCLUDE_DIRECTORIES(${SRC} test ${GTEST_ROOT} ${GTEST_ROOT}/include)
ADD_SUBDIRECTORY(${SRC} build)

ENABLE_TESTING()

SET(GTEST_MAIN ${GTEST_ROOT}/src/gtest_main.cc)
SET(GTEST_LIBS ${GTEST_ROOT}/libgtest.a ${GTEST_ROOT}/libgtest_main.a pthread)

AUX_SOURCE_DIRECTORY(${SRC} SRCS)
SET(GTEST_EXECUTABLE ${SRCS} ${GTEST_MAIN})
LIST(REMOVE_ITEM GTEST_EXECUTABLE ${SRC}/foolishgo.cc)

ADD_TEST(NAME BoardTest COMMAND BoardTest)
ADD_EXECUTABLE(BoardTest test/board_TEST.cc ${GTEST_MAIN})
TARGET_LINK_LIBRARIES(BoardTest ${GTEST_LIBS})

ADD_TEST(NAME BoardInGmTest COMMAND BoardInGmTest)
ADD_EXECUTABLE(BoardInGmTest test/board_in_gm_TEST.cc ${GTEST_EXECUTABLE})
TARGET_LINK_LIBRARIES(BoardInGmTest ${GTEST_LIBS})
